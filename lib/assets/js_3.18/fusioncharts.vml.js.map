{"version":3,"sources":["webpack:///./packages/fc-core/src/_internal/redraphael/redraphael.vml.js","webpack:///./packages/fc-core/src/_internal/vendors/redraphael/source/raphael.vml.js","webpack:///./packages/fc-core/src/_internal/redraphael/redraphael.export.vml.js"],"names":["extension","FusionCharts","R","getDep","name","type","requiresFusionCharts","vml","b","has","Str","String","toFloat","parseFloat","math","Math","round","mmax","max","mmin","min","sqrt","abs","separator","eve","arrayShift","Array","prototype","shift","f","_g","doc","createElement","S","E","map","M","L","C","Z","m","l","c","z","bites","val","cssDot","zoom","pathTypes","path","rect","image","ovalTypes","circle","ellipse","compensation","deg","dx","dy","matrix","rotate","x","y","setCoords","p","sx","sy","_","fillpos","o","node","s","style","flip","kx","ky","visibility","coordsize","rotation","coordorigin","fillsize","fill","getElementsByTagName","removeChild","position","size","appendChild","innerHTML","firstChild","behavior","adj","_url","toString","this","version","createNode","applyCustomAttributes","attrs","key","id","ca","attr","styles","setFillAndStroke","_setFillAndStroke","params","paper","canvas","oriOp","a","newpath","width","height","cx","cy","rx","ry","r","isOval","isGroup","res","par","removeAttribute","_getPath","dirty","href","title","target","cursor","blur","total","command","_pathToAbsolute","match","_path2curve","replace","all","args","vals","isMove","toLowerCase","value","length","push","pa","i","ii","j","jj","join","path2vml","indexOf","transform","is","apply","hide","show","format","split","offset","div","clipRect","dstyle","clip","slice","top","left","parentNode","insertBefore","raphael","raphaelid","antialias","textpath","textpathStyle","font","fontFamily","fontSize","fontWeight","fontStyle","addArrow","opacity","src","stroke","urlArr","fillOpacity","element","group","RefImg","Image","undefined","LoadRefImage","on","_ISURL","bbox","getBBox","_preload","offsetWidth","offsetHeight","color","getRGB","hex","error","charAt","addGradientFill","gradient","nonGradOpacity","opacity1","opacity2","newstroke","strokeColor","weight","joinstyle","miterlimit","endcap","dasharray","dashstyle","display","span","_style","_break","len","parent","getComputedFontStyle","lineHeight","text","string","brect","getBoundingClientRect","W","w","right","H","h","bottom","X","Y","bby","v","dirtyattrs","d","dd","bbx","updateFollowers","_updateFollowers","followerElem","getArrayCopy","arguments","call","fnName","followers","el","oriFOpacity","pow","fxfy","_radial_gradient","opts","fx","fy","angle","isNaN","dots","_parseDots","shape","method","color2","clrs","colors","focus","focussize","focusposition","Element","skew","_oid","customAttributes","_CustomAttributes","dirtyT","prev","next","elproto","constructor","tstr","oldt","vbs","_viewBoxShift","vbt","scale","_extractTransform","clone","isGrad","isPatt","translate","noRotation","isSimple","filter","toFilter","bb","bbt","xget","x2","yget","y2","scalex","scaley","removed","concat","soft","_getBBox","remove","_engine","getNode","__set__","exclude","unbind","pop","_drag","undrag","events","removeData","_elementsById","_tear","_removedFactory","names","out","def","_availableAttrs","stopPartialEventPropagation","follower","todel","subkey","cb","eventType","handler","context","dummyEve","elem","fn","_actualListners","_derivedListeners","drag","dbclick","fcclick","e","makeSelectiveCopy","attachEvent","evt","win","event","srcElement","off","index","undragstart","undragmove","undragend","undbclick","fcunclick","splice","detachEvent","getLastNode","overrideId","className","universalClassName","_HTMLClassName","cssText","_id","tx","ty","tzoom","get","Path","_rectPath","css","textpathok","setSize","cs","_viewBox","setViewBox","fit","forEach","initWin","document","createStyleSheet","addRule","namespaces","rvml","add","_createNode","tagName","prop","create","con","_getContainer","container","Error","_Paper","body","renderfix","clear","setHTMLClassName","availableAttrs","ID","matrixSanitizerReg","commaSanitizerReg","textNewLineReg","retriveNumReg","idSanitizerReg","grouptagtestReg","ampregex","quot1regex","quot2regex","ltregex","gtregex","IdCounter","gradientUnitNames","userSpaceOnUse","objectBoundingBox","attributeParser","conf","attrsObj","attrSTR","defs","vector","ln","units","gStr","gCloseStr","stopStr","_opts","_fx","_fy","dir","_r","_cx","_cy","sqx","shifted","test","toFixed","cos","rad","sin","invert","STOPSTR1","UNDEF","str","styleSTR","FILLSTR1","QUOT","toMatrixString","CLIPSTR1","CLIPSTR7","FONT","pluck","FONTSIZE","FONTWEIGHT","FONTFAMILY","stubFN","SPACE","baseHeight","valign","texts","baseAdjust","pluckNumber","textSTR","toSVG","keepImages","svg","childXMLSTR","parseNode","attrName","styleName","nodeType","xmlSTR","isShadow","nextXMLSTR"],"mappings":"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","file":"fusioncharts.vml.js","sourcesContent":["/* eslint require-jsdoc: 'error', valid-jsdoc: 'error' */\nimport RaphaelVml from '../vendors/redraphael/source/raphael.vml';\nimport RaphaelExport from './redraphael.export.vml';\n\nexport default {\n  extension: function (FusionCharts) {\n    let R = FusionCharts.getDep('redraphael', 'plugin');\n    RaphaelVml(R);\n    RaphaelExport(R);\n  },\n  name: 'redraphaelVml',\n  type: 'plugin',\n  requiresFusionCharts: true\n};\n","import { getArrayCopy } from \"./raphael.lib\";\n\n/**!\n* RedRaphael 1.0.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2012-2013 FusionCharts, Inc. <http://www.fusioncharts.com>\n*\n* Raphael 2.1.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n* Copyright © 2008-2012 Sencha Labs <http://sencha.com>\n*\n* Licensed under the MIT license.\n*/\n// Define _window as window object in case of indivual file inclusion.\nexport default function (R) {\n    if (R.vml) {\n        var has = \"hasOwnProperty\",\n        Str = String,\n        toFloat = parseFloat,\n        math = Math,\n        round = math.round,\n        mmax = math.max,\n        mmin = math.min,\n        sqrt = math.sqrt,\n        abs = math.abs,\n        fillString = \"fill\",\n        separator = /[, ]+/,\n        eve = R.eve,\n        ms = \" progid:DXImageTransform.Microsoft\",\n        arrayShift = Array.prototype.shift,\n        doc = R._g.doc,\n        f = doc.createElement(\"div\"),\n        b,\n        S = \" \",\n        E = \"\",\n        map = {\n            M: \"m\",\n            L: \"l\",\n            C: \"c\",\n            Z: \"x\",\n            m: \"t\",\n            l: \"r\",\n            c: \"v\",\n            z: \"x\"\n        },\n        bites = /([clmz]),?([^clmz]*)/gi,\n        blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n        val = /-?[^,\\s-]+/g,\n        cssDot = \"position:absolute;left:0;top:0;width:1px;height:1px\",\n        zoom = 21600,\n        pathTypes = {\n            path: 1,\n            rect: 1,\n            image: 1\n        },\n        ovalTypes = {\n            circle: 1,\n            ellipse: 1\n        },\n        path2vml = function(path) {\n            var total = /[ahqstv]/ig,\n            command = R._pathToAbsolute;\n            Str(path).match(total) && (command = R._path2curve);\n            total = /[clmz]/g;\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\n                var res = Str(path).replace(bites, function(all, command, args) {\n                    var vals = [],\n                    isMove = command.toLowerCase() == \"m\",\n                    res = map[command];\n                    args.replace(val, function(value) {\n                        if (isMove && vals.length == 2) {\n                            res += vals + map[command == \"m\" ? \"l\" : \"L\"];\n                            vals = [];\n                        }\n                        vals.push(round(value * zoom));\n                    });\n                    return res + vals;\n                });\n\n                return res || 'm0,0';\n            }\n            var pa = command(path), p, r;\n            res = [];\n            for (var i = 0, ii = pa.length; i < ii; i++) {\n                p = pa[i];\n                r = pa[i][0].toLowerCase();\n                r == \"z\" && (r = \"x\");\n                for (var j = 1, jj = p.length; j < jj; j++) {\n                    r += round(p[j] * zoom) + (j != jj - 1 ? \",\" : E);\n                }\n                res.push(r);\n            }\n            return res.length ? res.join(S) : 'm0,0';\n        },\n        compensation = function(deg, dx, dy) {\n            var m = R.matrix();\n            m.rotate(-deg, .5, .5);\n            return {\n                dx: m.x(dx, dy),\n                dy: m.y(dx, dy)\n            };\n        },\n        setCoords = function(p, sx, sy, dx, dy, deg) {\n            var _ = p._,\n            m = p.matrix,\n            fillpos = _.fillpos,\n            o = p.node,\n            s = o.style,\n            y = 1,\n            flip = \"\",\n            dxdy,\n            kx = zoom / sx,\n            ky = zoom / sy;\n            s.visibility = \"hidden\";\n            if (!sx || !sy) {\n                return;\n            }\n            o.coordsize = abs(kx) + S + abs(ky);\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n            if (deg) {\n                var c = compensation(deg, dx, dy);\n                dx = c.dx;\n                dy = c.dy;\n            }\n            sx < 0 && (flip += \"x\");\n            sy < 0 && (flip += \" y\") && (y = -1);\n            s.flip = flip;\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\n            if (fillpos || _.fillsize) {\n                var fill = o.getElementsByTagName(fillString);\n                fill = fill && fill[0];\n                if (fill) {\n                    o.removeChild(fill);\n                    if (fillpos) {\n                        c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                        fill.position = c.dx * y + S + c.dy * y;\n                    }\n                    if (_.fillsize) {\n                        fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                    }\n                    o.appendChild(fill);\n                }\n            }\n            s.visibility = \"visible\";\n        };\n        f.innerHTML = '<v:shape adj=\"1\"/>';\n        b = f.firstChild;\n        b.style.behavior = \"url(#default#VML)\";\n        if (!(b && typeof b.adj == 'object')) {\n            R.type = E;\n            // return (R.type = E);\n        }\n        f = null;\n\n        R._url = E;\n        R.toString = function() {\n            return  \"Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl \" + this.version;\n        };\n        var addArrow = function(o, value, isEnd) {\n            var values = Str(value).toLowerCase().split(\"-\"),\n            se = isEnd ? \"end\" : \"start\",\n            i = values.length,\n            type = \"classic\",\n            w = \"medium\",\n            h = \"medium\";\n            while (i--) {\n                switch (values[i]) {\n                    case \"block\":\n                    case \"classic\":\n                    case \"oval\":\n                    case \"diamond\":\n                    case \"open\":\n                    case \"none\":\n                        type = values[i];\n                        break;\n                    case \"wide\":\n                    case \"narrow\":\n                        h = values[i];\n                        break;\n                    case \"long\":\n                    case \"short\":\n                        w = values[i];\n                        break;\n                }\n            }\n            var stroke = o.node.getElementsByTagName(\"stroke\")[0];\n            stroke[se + \"arrow\"] = type;\n            stroke[se + \"arrowlength\"] = w;\n            stroke[se + \"arrowwidth\"] = h;\n        },\n        applyCustomAttributes = function (o, attrs) {\n            for (var key in attrs) {\n                eve(\"raphael.attr.\" + key + \".\" + o.id, o, attrs[key], key);\n                o.ca[key] && o.attr(key, attrs[key]);\n            }\n        },\n        styles = ['font', 'line-height', 'font-family', 'font-weight', 'font-style', 'font-size'],\n        getComputedFontStyle = function (o) {\n            var style = {},\n                _break,\n                i,\n                len = styles.length,\n                attrs;\n            while (o.paper && o.paper.canvas) {\n                attrs = o.attrs;\n                _break = true;\n                for (i = 0; i < len; i++) {\n                    if (!style[styles[i]]) {\n                        style[styles[i]] = attrs[styles[i]];\n                        _break = false;\n                    }\n                }\n                if (_break) break;\n                o = o.parent;\n            }\n            return style;\n        },\n        setFillAndStroke = R._setFillAndStroke = function(o, params) {\n            if (!o.paper.canvas) return;\n            // o.paper.canvas.style.display = \"none\";\n            o.attrs = o.attrs || {};\n            var node = o.node,\n            a = o.attrs,\n            s = node.style,\n            xy,\n            oriOp,\n            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n            isGroup = o.type === 'group',\n            res = o;\n            oriOp = res.oriOp || (res.oriOp = {});\n            for (var par in params)\n                // Not setting any black property\n                if (params[par] === '') {\n                    node.removeAttribute(par);\n                    delete a[par];\n                    delete params[par];\n                    continue;\n                } else if (params[has](par)) {\n                    a[par] = params[par];\n                }\n            if (newpath) {\n                a.path = R._getPath[o.type](o);\n                o._.dirty = 1;\n            }\n            params.href && (node.href = params.href);\n            params.title && (node.title = params.title);\n            params.target && (node.target = params.target);\n            params.cursor && (s.cursor = params.cursor);\n            \"blur\" in params && o.blur(params.blur);\n\n            if (params.path && o.type == \"path\" || newpath) {\n                node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\"r\") ? R._pathToAbsolute(a.path) : a.path);\n                if (o.type == \"image\") {\n                    o._.fillpos = [a.x, a.y];\n                    o._.fillsize = [a.width, a.height];\n                    setCoords(o, 1, 1, 0, 0, 0);\n                }\n            }\n            \"transform\" in params && o.transform(params.transform);\n            if (\"rotation\" in params) {\n                var rotation = params.rotation;\n                if (R.is(rotation, \"array\")) {\n                    o.rotate.apply(o, rotation);\n                }\n                else {\n                    o.rotate(rotation);\n                }\n            }\n            if (\"visibility\" in params) {\n                params.visibility === 'hidden' ? o.hide() : o.show();\n            }\n            if (isOval) {\n                var cx = +a.cx,\n                cy = +a.cy,\n                rx = +a.rx || +a.r || 0,\n                ry = + a.ry || + a.r || 0;\n                node.path = R.format(\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n            }\n            if (\"clip-rect\" in params) {\n                var rect = Str(params[\"clip-rect\"]).split(separator);\n\n                if (rect.length == 4) {\n                    rect[0] = +rect[0];\n                    rect[1] = +rect[1];\n                    rect[2] = +rect[2] + rect[0];\n                    rect[3] = +rect[3] + rect[1];\n\n                    /** @todo create separate element for group clip-rect to\n                     * avoid unclipping issue */\n                    var div = isGroup ? node : (node.clipRect ||\n                            R._g.doc.createElement(\"div\")),\n                        offset,\n                        dstyle = div.style;\n\n                    if (isGroup) {\n                        o.clip = rect.slice(); // copy param\n                        offset = o.matrix.offset();\n                        offset = [toFloat(offset[0]), toFloat(offset[1])];\n                        // invert matrix calculation\n                        rect[0] -= offset[0];\n                        rect[1] -= offset[1];\n                        rect[2] -= offset[0];\n                        rect[3] -= offset[1];\n                        // Fix for bug in ie clip-auto when height/width is not defined\n                        /** @todo set dynamic w/h based on clip bounds or find\n                         * another workaround fix */\n                        //dstyle.width = \"10800px\";\n                        //dstyle.height = \"10800px\";\n\n                        // Not sure about the above fix\n                        // Revert the fix because it's creating another issue.\n                        // Setting the Group style, width/height as \"10800px\" makes the other group inaccessible\n                        // which is below this group\n                        dstyle.width = \"1px\";\n                        dstyle.height = \"1px\";\n                    }\n                    else if (!node.clipRect) {\n                        dstyle.top = \"0\";\n                        dstyle.left = \"0\";\n                        dstyle.width = o.paper.width + \"px\";\n                        dstyle.height = o.paper.height + \"px\";\n                        node.parentNode.insertBefore(div, node);\n                        div.appendChild(node);\n                        div.raphael = true;\n                        div.raphaelid = node.raphaelid;\n                        node.clipRect = div;\n                    }\n                    dstyle.position = \"absolute\";\n                    dstyle.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", rect);\n                }\n                if (!params[\"clip-rect\"]) {\n                    if (isGroup && o.clip) {\n                        node.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                        delete o.clip;\n                    }\n                    else if (node.clipRect) {\n                        node.clipRect.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                    }\n                }\n            }\n\n            if (\"shape-rendering\" in params) {\n                node.style.antialias = (params[\"shape-rendering\"] !== 'crisp');\n            }\n            // Css styles will be applied in element or group.\n            if (o.textpath || isGroup) {\n            var textpathStyle = isGroup ? node.style : o.textpath.style;\n                params.font && (textpathStyle.font = params.font);\n                params[\"font-family\"] && (textpathStyle.fontFamily = '\"' + params[\"font-family\"].split(\",\")[0].replace(/^['\"]+|['\"]+$/g, E) + '\"');\n                params[\"font-size\"] && (textpathStyle.fontSize = params[\"font-size\"]);\n                params[\"font-weight\"] && (textpathStyle.fontWeight = params[\"font-weight\"]);\n                params[\"font-style\"] && (textpathStyle.fontStyle = params[\"font-style\"]);\n            }\n            if (\"arrow-start\" in params) {\n                R.addArrow && R.addArrow(res, params[\"arrow-start\"]);\n            }\n            if (\"arrow-end\" in params) {\n                R.addArrow && R.addArrow(res, params[\"arrow-end\"], 1);\n            }\n            if (params.opacity != null ||\n                params[\"stroke-width\"] != null ||\n                params.fill != null ||\n                params.src != null ||\n                params.stroke != null ||\n                params[\"stroke-width\"] != null ||\n                params[\"stroke-opacity\"] != null ||\n                params[\"fill-opacity\"] != null ||\n                params[\"stroke-dasharray\"] != null ||\n                params[\"stroke-miterlimit\"] != null ||\n                params[\"stroke-linejoin\"] != null ||\n                params[\"stroke-linecap\"] != null) {\n                var fill = node.getElementsByTagName(fillString),\n                newfill = false,\n                fillOpacity = -1;\n                fill = fill && fill[0];\n                !fill && (newfill = fill = createNode(fillString));\n                if (o.type == \"image\" && params.src) {\n                    LoadRefImage(o, params);\n                    fill.src = params.src;\n                }\n                params.fill && (fill.on = true);\n                if (fill.on == null || params.fill == \"none\" || params.fill === null) {\n                    fill.on = false;\n                }\n\n                if (fill.on && params.fill) {\n                    var isURL = Str(params.fill).match(R._ISURL),\n                        urlArr;\n                    if (isURL) {\n                        urlArr = params.fill.split(R._ISURL);\n                        fill.parentNode == node && node.removeChild(fill);\n                        fill.rotate = true;\n                        fill.src = urlArr[1];\n                        fill.type = \"tile\";\n                        var bbox = o.getBBox(1);\n                        fill.position = bbox.x + S + bbox.y;\n                        o._.fillpos = [bbox.x, bbox.y];\n\n                        R._preload(urlArr[1], function() {\n                            o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                        });\n                    } else {\n                        var color = R.getRGB(params.fill);\n                        fill.color = color.hex;\n                        fill.src = E;\n                        fill.type = \"solid\";\n\n                        if (color.error && (res.type in {\n                            circle: 1,\n                            ellipse: 1\n                        } || Str(params.fill).charAt() != \"r\") && addGradientFill(res, params.fill, fill)) {\n                            a.fill = \"none\";\n                            a.gradient = params.fill;\n                            fill.rotate = false;\n                        }\n                        else if (\"opacity\" in color && !(\"fill-opacity\" in params)) {\n                            // store oiginal non gradient color opacity\n                            oriOp.nonGradOpacity = fillOpacity = color.opacity;\n                        }\n                    }\n                }\n                if (fillOpacity !== -1 || \"fill-opacity\" in params || \"opacity\" in params) {\n                    var opacity = ((+a[\"fill-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1);\n                    opacity = mmin(mmax(opacity, 0), 1);\n                    oriOp.opacity = opacity;\n                    // if gradient color opacity is set then opacity (applied through the params)\n                    //  should be multiplied with the gradient opacity so that ratio will remain same\n                    if (oriOp.opacity1 !== undefined) {\n                        fill.opacity = oriOp.opacity1 * opacity;\n                        fill['o:opacity2'] = oriOp.opacity2 * opacity;\n                    } else {\n                        // multiply with the original non gradient color opacity with the opacity to preserve the ratio of the opacity\n                        fill.opacity = opacity * (oriOp.nonGradOpacity === undefined ? 1 : oriOp.nonGradOpacity);\n                    }\n                    if (fill.src) {\n                        fill.color = \"none\";\n                    }\n                }\n                oriOp.opacity = undefined;\n                node.appendChild(fill);\n                var stroke = (node.getElementsByTagName(\"stroke\") && node.getElementsByTagName(\"stroke\")[0]),\n                    newstroke = false;\n                !stroke && (newstroke = stroke = createNode(\"stroke\"));\n                if ((params.stroke && params.stroke != \"none\") ||\n                    params[\"stroke-width\"] ||\n                    params[\"stroke-opacity\"] != null ||\n                    params[\"stroke-dasharray\"] ||\n                    params[\"stroke-miterlimit\"] ||\n                    params[\"stroke-linejoin\"] ||\n                    params[\"stroke-linecap\"]) {\n                    stroke.on = true;\n                }\n                (params.stroke == \"none\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\"stroke-width\"] == 0) && (stroke.on = false);\n                var strokeColor = R.getRGB(('stroke' in params) ? params.stroke : a.stroke);\n                stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n                opacity = ((+a[\"stroke-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.opacity + 1 || 2) - 1);\n                var width = (toFloat(params[\"stroke-width\"]) || 1) * .75;\n                opacity = mmin(mmax(opacity, 0), 1);\n                params[\"stroke-width\"] == null && (width = a[\"stroke-width\"]);\n                params[\"stroke-width\"] && (stroke.weight = width);\n                width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n                // stroke-opacity should be applied only if stroke color is provided.\n                stroke.opacity = (a.stroke !== 'none') ? opacity : 0;\n                params[\"stroke-linejoin\"] && (stroke.joinstyle = params[\"stroke-linejoin\"]) || newstroke && (newstroke.joinstyle = 'miter');\n                stroke.miterlimit = params[\"stroke-miterlimit\"] || 8;\n                params[\"stroke-linecap\"] && (stroke.endcap = params[\"stroke-linecap\"] == \"butt\" ? \"flat\" : params[\"stroke-linecap\"] == \"square\" ? \"square\" : \"round\");\n                if (params[\"stroke-dasharray\"]) {\n                    var dasharray = {\n                        \"-\": \"shortdash\",\n                        \".\": \"shortdot\",\n                        \"-.\": \"shortdashdot\",\n                        \"-..\": \"shortdashdotdot\",\n                        \". \": \"dot\",\n                        \"- \": \"dash\",\n                        \"--\": \"longdash\",\n                        \"- .\": \"dashdot\",\n                        \"--.\": \"longdashdot\",\n                        \"--..\": \"longdashdotdot\"\n                    };\n                    stroke.dashstyle = dasharray[has](params[\"stroke-dasharray\"]) ? dasharray[params[\"stroke-dasharray\"]] :\n                            ((params[\"stroke-dasharray\"].join && params[\"stroke-dasharray\"].join(' ')) || E);\n                }\n                newstroke && node.appendChild(stroke);\n            }\n            if (res.type == \"text\") {\n                res.paper.canvas.style.display = E;\n                var span = res.paper.span,\n                m = 100,\n                _style = getComputedFontStyle(res),\n                fontSize = _style.font && _style.font.match(/\\d+(?:\\.\\d*)?(?=px)/),\n                lineHeight = _style['line-height'] && (_style['line-height']+E).match(/\\d+(?:\\.\\d*)?(?=px)/);\n                s = span.style;\n                _style.font && (s.font = _style.font);\n                _style[\"font-family\"] && (s.fontFamily = _style[\"font-family\"]);\n                _style[\"font-weight\"] && (s.fontWeight = _style[\"font-weight\"]);\n                _style[\"font-style\"] && (s.fontStyle = _style[\"font-style\"]);\n                fontSize = toFloat(_style[\"font-size\"] || fontSize && fontSize[0]) || 10;\n                s.fontSize = fontSize * m + \"px\";\n                lineHeight = toFloat(_style[\"line-height\"] || lineHeight && lineHeight[0] || fontSize * 1.2) || 12;\n                s.lineHeight = lineHeight * m + 'px';\n                R.is(params.text, 'array') && (params.text = res.textpath.string = params.text.join('\\n').replace(/<br\\s*?\\/?>/ig, '\\n'));\n                res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \"&#60;\").replace(/&/g, \"&#38;\").replace(/\\n/g, \"<br>\"));\n                var brect = span.getBoundingClientRect();\n                res.W = a.w = (brect.right - brect.left) / m;\n                res.H = a.h = (brect.bottom - brect.top) / m;\n                // res.paper.canvas.style.display = \"none\";\n                res.X = a.x;\n                res.Y = a.y;\n                var leading = lineHeight - fontSize;\n\n                switch(a[\"vertical-align\"]) {\n                    case \"top\":\n                        res.bby = res.H / 2; // + leading;\n                        break;\n                    case \"bottom\":\n                        res.bby = -res.H / 2; // - leading;\n                        break;\n                    default:\n                        res.bby = 0;\n                }\n\n                (\"x\" in params || \"y\" in params || res.bby !== undefined) && (res.path.v = R.format(\"m{0},{1}l{2},{1}\", round(a.x * zoom), round((a.y + (res.bby || 0)) * zoom), round(a.x * zoom) + 1));\n                var dirtyattrs = [\"x\", \"y\", \"text\", \"font\", \"font-family\", \"font-weight\", \"font-style\", \"font-size\", \"line-height\"];\n                for (var d = 0, dd = dirtyattrs.length; d < dd; d++)\n                    if (dirtyattrs[d] in params) {\n                        res._.dirty = 1;\n                        break;\n                    }\n\n                // text-anchor emulation\n                switch (a[\"text-anchor\"]) {\n                    case \"start\":\n                        res.textpath.style[\"v-text-align\"] = \"left\";\n                        res.bbx = res.W / 2;\n                        break;\n                    case \"end\":\n                        res.textpath.style[\"v-text-align\"] = \"right\";\n                        res.bbx = -res.W / 2;\n                        break;\n                    default:\n                        res.textpath.style[\"v-text-align\"] = \"center\";\n                        res.bbx = 0;\n                        break;\n                }\n                res.textpath.style[\"v-text-kern\"] = true;\n            }\n        // res.paper.canvas.style.display = E;\n        },\n        /*\n        * Keeps the follower element in sync with the leaders.\n        * First and second arguments represents the context(element) and the\n        name of the callBack function respectively.\n        * The callBack is invoked for indivual follower Element with the rest of\n        arguments.\n        */\n        updateFollowers = R._updateFollowers = function () {\n            var i,\n                ii,\n                followerElem,\n                args = getArrayCopy(arguments),\n                o = arrayShift.call(args),\n                fnName = arrayShift.call(args);\n            for (i = 0, ii = o.followers.length; i < ii; i++) {\n                followerElem = o.followers[i].el;\n                followerElem[fnName].apply(followerElem, args);\n            }\n        },\n        addGradientFill = function(o, gradient, fill) {\n            o.attrs = o.attrs || {};\n            var attrs = o.attrs,\n            pow = Math.pow,\n            oriFOpacity,\n            oriOp = o.oriOp,\n            opacity,\n            oindex,\n            type = \"linear\",\n            fxfy = \".5 .5\";\n            o.attrs.gradient = gradient;\n            gradient = Str(gradient).replace(R._radial_gradient, function(all, opts) {\n                type = \"radial\";\n                opts = opts && opts.split(',') || [];\n\n                // fx,fy of vml is cx,cy of svg\n                var cx = opts[0],\n                    cy = opts[1],\n                    r = opts[2],\n                    fx = opts[3],\n                    fy = opts[4],\n                    units = opts[5];\n                if (fx && fy) {\n                    fx = toFloat(fx);\n                    fy = toFloat(fy);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                    fxfy = fx + S + fy;\n                }\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            o = o.shape || o.node;\n            if (dots.length) {\n                fill.parentNode == o && o.removeChild(fill);\n                fill.on = true;\n                fill.method = \"none\";\n                fill.color = dots[0].color;\n                fill.color2 = dots[dots.length - 1].color;\n                //For VML use first and last available alpha\n                var clrs = [],\n                opacity1 = 1,\n                opacity2 = dots[0].opacity === undefined ? 1 : dots[0].opacity;\n                for (var i = 0, ii = dots.length; i < ii; i++) {\n                    dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n                    if (dots[i].opacity !== undefined) {\n                        opacity1 = dots[i].opacity;//update with latest avaible opacity\n                    }\n                }\n                fill.colors = clrs.length ? clrs.join() : \"0% \" + fill.color;\n                //set opacity1 & opacity2\n                // store original gradient color opacity\n                oriOp.opacity1 = opacity1;\n                oriOp.opacity2 = opacity2;\n                oriFOpacity = (oriOp.opacity === undefined) ? 1 : oriOp.opacity;\n                // if gradient color opacity is set then opacity (applied through the params)\n                // should be multiplied with the gradient opacity so that ratio will remain same\n                fill.opacity = opacity1 * oriFOpacity;\n                fill['o:opacity2'] = opacity2 * oriFOpacity;\n                if (type == \"radial\") {\n                    fill.type = \"gradientTitle\";\n                    fill.focus = \"100%\";\n                    fill.focussize = \"0 0\";\n                    fill.focusposition = fxfy;\n                    fill.angle = 0;\n                } else {\n                    // fill.rotate= true;\n                    fill.type = \"gradient\";\n                    fill.angle = (270 - angle) % 360;\n                }\n                o.appendChild(fill);\n            }\n            return 1;\n        },\n        Element = function(node, vml, group/*, dontAppend*/) {\n            var o = this,\n                parent = group || vml,\n                skew;\n\n            /*!dontAppend && */parent.canvas && parent.canvas.appendChild(node);\n            skew = createNode(\"skew\");\n            skew.on = true;\n            node.appendChild(skew);\n            o.skew = skew;\n\n            o.node = o[0] = node;\n            node.raphael = true;\n            node.raphaelid = o.id = R._oid++;\n\n            o.X = 0;\n            o.Y = 0;\n\n            o.attrs = o.attrs || {};\n            o.followers = o.followers || [];\n\n            o.paper = vml;\n            o.ca = o.customAttributes = o.customAttributes ||\n                new vml._CustomAttributes();\n\n            o.matrix = R.matrix();\n            o._ = {\n                transform: [],\n                sx: 1,\n                sy: 1,\n                dx: 0,\n                dy: 0,\n                deg: 0,\n                dirty: 1,\n                dirtyT: 1\n            };\n\n            o.parent = parent;\n            !parent.bottom && (parent.bottom = o);\n\n            o.prev = parent.top;\n            parent.top && (parent.top.next = o);\n            parent.top = o;\n            o.next = null;\n        };\n        var elproto = R.el;\n\n        Element.prototype = elproto;\n        elproto.constructor = Element;\n\n        elproto.transform = function(tstr) {\n            if (tstr == null) {\n                return this._.transform;\n            }\n            var vbs = this.paper._viewBoxShift,\n            vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n            oldt;\n\n            if (vbs) {\n                oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n            }\n\n            R._extractTransform(this, vbt + tstr);\n\n            var matrix = this.matrix.clone(),\n            skew = this.skew,\n            o = this.node,\n            split,\n            isGrad = ~Str(this.attrs.fill).indexOf(\"-\"),\n            isPatt = !Str(this.attrs.fill).indexOf(\"url(\");\n            matrix.translate(-.5, -.5);\n            if (isPatt || isGrad || this.type == \"image\") {\n                skew.matrix = \"1 0 0 1\";\n                skew.offset = \"0 0\";\n                split = matrix.split();\n                if ((isGrad && split.noRotation) || !split.isSimple) {\n                    o.style.filter = matrix.toFilter();\n                    var bb = this.getBBox(),\n                    bbt = this.getBBox(1),\n                    xget = bb.x2 && bbt.x2 && 'x2' || 'x',\n                    yget = bb.y2 && bbt.y2 && 'y2' || 'y',\n                    dx = bb[xget] - bbt[xget],\n                    dy = bb[yget] - bbt[yget];\n                    o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                    setCoords(this, 1, 1, dx, dy, 0);\n                } else {\n                    o.style.filter = E;\n                    setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n                }\n            } else {\n                o.style.filter = E;\n                skew.matrix = Str(matrix);\n                skew.offset = matrix.offset();\n            }\n            oldt && (this._.transform = oldt);\n\n            return this;\n        };\n        elproto.rotate = function(deg, cx, cy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'rotate', deg, cx, cy);\n            if (deg == null) {\n                return;\n            }\n            deg = Str(deg).split(separator);\n            if (deg.length - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                var bbox = o.getBBox(1);\n                cx = bbox.x + bbox.width / 2;\n                cy = bbox.y + bbox.height / 2;\n            }\n            o._.dirtyT = 1;\n            o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n            return o;\n        };\n        elproto.translate = function(dx, dy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'translate', dx, dy);\n            dx = Str(dx).split(separator);\n            if (dx.length - 1) {\n                dy = toFloat(dx[1]);\n            }\n            dx = toFloat(dx[0]) || 0;\n            dy = +dy || 0;\n            if (o._.bbox) {\n                o._.bbox.x += dx;\n                o._.bbox.y += dy;\n            }\n            o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n            return o;\n        };\n        elproto.scale = function(sx, sy, cx, cy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'scale', sx, sy, cx, cy);\n            sx = Str(sx).split(separator);\n            if (sx.length - 1) {\n                sy = toFloat(sx[1]);\n                cx = toFloat(sx[2]);\n                cy = toFloat(sx[3]);\n                isNaN(cx) && (cx = null);\n                isNaN(cy) && (cy = null);\n            }\n            sx = toFloat(sx[0]);\n            (sy == null) && (sy = sx);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                var bbox = o.getBBox(1);\n            }\n            cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n            cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n            o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n            o._.dirtyT = 1;\n            return o;\n        };\n        elproto.hide = function(soft) {\n            var o = this;\n            updateFollowers(o, 'hide', soft);\n            !o.removed && (o.node.style.display = \"none\");\n            return o;\n        };\n\n        elproto.show = function(soft) {\n            var o = this;\n            updateFollowers(o, 'show', soft);\n            !o.removed && (o.node.style.display = E);\n            return o;\n        };\n        elproto._getBBox = function() {\n            var o = this;\n            if (o.removed) {\n                return {};\n            }\n            return {\n                x: o.X + (o.bbx || 0) - o.W / 2,\n                y: o.Y + (o.bby || 0) - o.H / 2,\n                width: o.W,\n                height: o.H\n            };\n        };\n        elproto.remove = function() {\n            if (this.removed || !this.parent.canvas) {\n                return;\n            }\n\n            var o = this,\n                node = R._engine.getNode(o),\n                paper = o.paper,\n                shape = o.shape,\n                i;\n\n            paper.__set__ && paper.__set__.exclude(o);\n            eve.unbind(\"raphael.*.*.\" + o.id);\n\n            shape && shape.parentNode.removeChild(shape);\n            node.parentNode && node.parentNode.removeChild(node);\n\n            while (i = o.followers.pop()) {\n                i.el.remove();\n            }\n            while (i = o.bottom) {\n                i.remove();\n            }\n\n            if (o._drag) {\n                o.undrag();\n            }\n\n            if (o.events)  {\n                while (i = o.events.pop()) {\n                    i.unbind();\n                }\n            }\n\n            o.removeData();\n            delete paper._elementsById[o.id];\n            R._tear(o, o.parent);\n\n            for (var i in o) {\n                o[i] = typeof o[i] === \"function\" ? R._removedFactory(i) : null;\n            }\n            o.removed = true;\n        };\n\n        elproto.attr = function(name, value) {\n            if (this.removed) {\n                return this;\n            }\n            if (name == null) {\n                var res = {};\n                for (var a in this.attrs)\n                    if (this.attrs[has](a)) {\n                        res[a] = this.attrs[a];\n                    }\n                res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n                res.transform = this._.transform;\n                res.visibility = this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n                return res;\n            }\n            if (value == null && R.is(name, \"string\")) {\n                if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                    return this.attrs.gradient;\n                }\n                if (name == \"visibility\") {\n                    return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n                }\n                var names = name.split(separator),\n                out = {};\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    name = names[i];\n                    if (name in this.attrs) {\n                        out[name] = this.attrs[name];\n                    } else if (R.is(this.ca[name], \"function\")) {\n                        out[name] = this.ca[name].def;\n                    } else {\n                        out[name] = R._availableAttrs[name];\n                    }\n                }\n                return ii - 1 ? out : out[names[0]];\n            }\n            if (this.attrs && value == null && R.is(name, \"array\")) {\n                out = {};\n                for (i = 0, ii = name.length; i < ii; i++) {\n                    out[name[i]] = this.attr(name[i]);\n                }\n                return out;\n            }\n            var params;\n            if (value != null) {\n                params = {};\n                params[name] = value;\n            }\n            value == null && R.is(name, \"object\") && (params = name);\n            if (!R.stopPartialEventPropagation) {\n                for (var key in params) {\n                    eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key], key);\n                }\n            }\n            if (params) {\n                var todel = {};\n                for (key in this.ca) {\n                    if (this.ca[key] && params[has](key) && R.is(this.ca[key], \"function\") && !this.ca['_invoked' + key]) {\n                        this.ca['_invoked' + key] = true; // prevent recursion\n                        var par = this.ca[key].apply(this, [].concat(params[key]));\n                        delete this.ca['_invoked' + key];\n\n                        for (var subkey in par) {\n                            if (par[has](subkey)) {\n                                params[subkey] = par[subkey];\n                            }\n                        }\n                        this.attrs[key] = params[key];\n                        if (par === false) {\n                            todel[key] = params[key];\n                            delete params[key];\n                        }\n                    }\n                }\n\n                // this.paper.canvas.style.display = \"none\";\n                if ('text' in params && this.type == \"text\") {\n                    R.is(params.text, 'array') && (params.text = params.text.join('\\n'));\n                    this.textpath.string = params.text.replace(/<br\\s*?\\/?>/ig, '\\n');\n                }\n                setFillAndStroke(this, params);\n                var follower;\n                for (i = 0, ii = this.followers.length; i < ii; i++) {\n                    follower = this.followers[i];\n                    (follower.cb && !follower.cb.call(follower.el, params, this)) ||\n                        follower.el.attr(params);\n                }\n                for (var subkey in todel) {\n                    params[subkey] = todel[subkey];\n                }\n            // this.paper.canvas.style.display = E;\n            }\n            return this;\n        };\n\n        /*\\\n        * Element.on\n        [ method ]\n        **\n        * Bind handler function for a particular event to Element\n        * @param eventType - Type of event\n        * @param handler - Function to be called on the firing of the event\n        \\*/\n        elproto.on = function(eventType, handler, context) {\n            var elem = this,\n                dummyEve,\n                fn = handler;\n            if (elem.removed) {\n                return elem;\n            }\n\n            elem._actualListners || (elem._actualListners = []);\n            elem._derivedListeners || (elem._derivedListeners = []);\n\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.drag(null, handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.drag(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.drag(null, null, handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.dbclick(handler, context);\n                    return elem;\n                case 'fc-click':\n                    elem.fcclick(handler, context);\n                    return elem;\n            }\n\n            eventType = eventType.replace(/fc-/, '');\n\n            // There is discrepancy in IE-8 load and error event emmition,\n            // that's why we are attaching the load and error events on the Reference Image\n            if (elem._ && elem._.RefImg && (eventType === 'load' || eventType === 'error')) {\n                node = elem._.RefImg;\n                fn = (function (el, handler) {\n                    return function (e) {\n                        dummyEve = {};\n                        R.makeSelectiveCopy(dummyEve, e);\n                        dummyEve.target = elem._.RefImg;\n                        !el.removed && handler.call(el, dummyEve);\n                    };\n                })(elem, handler);\n            } else {\n                node = elem.node;\n            }\n\n            if (!node.attachEvent) {\n                fn = function() {\n                    var evt = R._g.win.event;\n                    evt.target = evt.srcElement;\n                    handler(evt);\n                };\n            } else if (fn === handler) {\n                fn = function (e) {\n                    handler.call(context || elem, e);\n                }\n            }\n\n            // Storing the actual and derived event for removing it later\n            elem._actualListners.push(handler);\n            elem._derivedListeners.push(fn);\n\n            if (node.attachEvent) {\n                node.attachEvent('on'+ eventType, fn);\n            }\n            else {\n                node['on'+ eventType] = fn;\n            }\n            return elem;\n        };\n\n        /*\\\n        * Element.off\n        [ method ]\n        **\n        * Remove handler function bind to an event of element\n        * @param eventType - Type of event\n        * @param handler - Function to be removed from event\n        \\*/\n        elproto.off = function(eventType, handler) {\n            var elem = this,\n                index;\n            if (elem.removed) {\n                return elem;\n            }\n\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.undragstart(handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.undragmove(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.undragend(handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.undbclick(handler);\n                    return elem;\n                case 'fc-click':\n                    elem.fcunclick(handler);\n                    return elem;\n            }\n\n            eventType = eventType.replace(/fc-/, '');\n\n            index = elem._actualListners.indexOf(handler);\n\n            if (index !== -1) {\n                handler = elem._derivedListeners[index];\n                elem._actualListners.splice(index, 1);\n                elem._derivedListeners.splice(index, 1);\n            }\n\n            if (elem.node.attachEvent) {\n                elem.node.detachEvent('on'+ eventType, handler);\n            }\n            else {\n                elem.node['on'+ eventType] = null;\n            }\n            return elem;\n        };\n\n        R._engine.getNode = function (el) {\n            var node = el.node || el[0].node;\n            return node.clipRect || node;\n        };\n        R._engine.getLastNode = function (el) {\n            var node = el.node || el[el.length - 1].node;\n            return node.clipRect || node;\n        };\n\n        R._engine.group = function(vml, id, group, overrideId) {\n            var el = R._g.doc.createElement(\"div\"),\n                className,\n                universalClassName = vml._HTMLClassName,\n                p = new Element(el, vml, group);\n\n            el.style.cssText = cssDot;\n            p._id = id || E;\n\n            if (id) {\n                if (overrideId) {\n                    className = el.className = 'raphael-group-' + id;\n                } else {\n                    className = el.className = 'raphael-group-' + p.id + '-' + id;\n                }\n            }\n\n            if (universalClassName) {\n                el.className = className ? className + ' ' + universalClassName : universalClassName;\n            }\n            (group || vml).canvas.appendChild(el);\n\n            p.type = 'group';\n            p.canvas = p.node;\n            p.transform = R._engine.group.transform;\n            p.top = null;\n            p.bottom = null;\n\n            return p;\n        };\n\n        R._engine.group.transform = function(tstr) {\n            if (tstr == null) {\n                return this._.transform;\n            }\n\n            var o = this,\n                s = o.node.style,\n                c = o.clip,\n                vbs = o.paper._viewBoxShift,\n                vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n                oldt,\n                matrix,\n                offset,\n                tx,\n                ty;\n\n            if (vbs) {\n                oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, o._.transform || E);\n            }\n            R._extractTransform(o, vbt + tstr);\n            matrix = o.matrix;\n            offset = matrix.offset();\n            tx = toFloat(offset[0]) || 0;\n            ty = toFloat(offset[1]) || 0;\n\n            s.left = tx + \"px\";\n            s.top = ty + \"px\";\n            s.zoom = (o._.tzoom = matrix.get(0)) + E;\n\n            /** @todo try perform relative group transform, thus avoiding\n             * transform on clipping */\n            c && (s.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", [\n                c[0] - tx, c[1] - ty, c[2] - tx, c[3] - ty\n            ]));\n\n            return o;\n        };\n\n        R._engine.path = function(vml, attrs, group) {\n            var el = createNode(\"shape\");\n            el.style.cssText = cssDot;\n            el.coordsize = zoom + S + zoom;\n            el.coordorigin = vml.coordorigin;\n\n            var p = new Element(el, vml, group);\n            p.type = attrs.type || \"path\";\n            p.path = [];\n            p.Path = E;\n\n            attrs.type && (delete attrs.type);\n            setFillAndStroke(p, attrs);\n            applyCustomAttributes(p, attrs);\n            return p;\n        };\n\n        R._engine.rect = function(vml, attrs, group) {\n            var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h, attrs.r);\n\n            attrs.path = path;\n            attrs.type = \"rect\";\n\n            var res = vml.path(attrs, group),\n            a = res.attrs;\n            res.X = a.x;\n            res.Y = a.y;\n            res.W = a.width;\n            res.H = a.height;\n            a.path = path;\n\n            return res;\n        };\n        R._engine.ellipse = function(vml, attrs, group) {\n            attrs.type = \"ellipse\";\n\n            var res = vml.path(attrs, group),\n                a = res.attrs;\n            res.X = a.x - a.rx;\n            res.Y = a.y - a.ry;\n            res.W = a.rx * 2;\n            res.H = a.ry * 2;\n\n            return res;\n        };\n        R._engine.circle = function(vml, attrs, group) {\n            attrs.type = \"circle\";\n\n            var res = vml.path(attrs, group),\n                a = res.attrs;\n\n            res.X = a.x - a.r;\n            res.Y = a.y - a.r;\n            res.W = res.H = a.r * 2;\n            return res;\n        };\n        function LoadRefImage (element, attrs) {\n            var src = attrs.src,\n                parent = element._.group,\n                node = element.node;\n            if (!element._.RefImg) {\n                element._.RefImg = new Image();\n            }\n            if (attrs.src === undefined) {\n                return;\n            }\n            element._.RefImg.src = src;\n        };\n        R._engine.image = function(vml, attrs, group) {\n            attrs.w || (attrs.w = attrs.width);\n            attrs.h || (attrs.h = attrs.height);\n            var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h);\n\n            attrs.path = path;\n            attrs.type = \"image\";\n            attrs.stroke = \"none\";\n            var res = vml.path(attrs, group),\n                a = res.attrs,\n                node = res.node,\n                fill = node.getElementsByTagName(fillString)[0];\n            !res._.RefImg && (res._.RefImg = new Image());\n            a.src = attrs.src;\n            res.X = a.x = attrs.x;\n            res.Y = a.y = attrs.y;\n            res.W = a.width = attrs.w;\n            res.H = a.height = attrs.h;\n\n            fill.parentNode == node && node.removeChild(fill);\n            fill.rotate = true;\n            fill.src = a.src;\n            fill.type = \"tile\";\n            res._.fillpos = [a.x, a.y];\n            res._.fillsize = [a.w, a.h];\n            node.appendChild(fill);\n            setCoords(res, 1, 1, 0, 0, 0);\n            return res;\n        };\n        R._engine.text = function(vml, attrs, group, css) {\n            var el = createNode(\"shape\"),\n                path = createNode(\"path\"),\n                o = createNode(\"textpath\");\n            x = attrs.x || 0;\n            y = attrs.y || 0;\n            text = attrs.text;\n            path.v = R.format(\"m{0},{1}l{2},{1}\", round(attrs.x * zoom), round(attrs.y * zoom), round(attrs.x * zoom) + 1);\n            path.textpathok = true;\n            o.string = Str(attrs.text).replace(/<br\\s*?\\/?>/ig, '\\n');\n            o.on = true;\n            el.style.cssText = cssDot;\n            el.coordsize = zoom + S + zoom;\n            el.coordorigin = \"0 0\";\n            var p = new Element(el, vml, group);\n\n            p.shape = el;\n            p.path = path;\n            p.textpath = o;\n            p.type = \"text\";\n            p.attrs.text = Str(attrs.text || E);\n            p.attrs.x = attrs.x;\n            p.attrs.y = attrs.y;\n            p.attrs.w = 1;\n            p.attrs.h = 1;\n            css && p.css && p.css(css, undefined, true);\n            setFillAndStroke(p, attrs);\n            applyCustomAttributes(p, attrs);\n\n            el.appendChild(o);\n            el.appendChild(path);\n\n            return p;\n        };\n\n        R._engine.setSize = function(width, height) {\n            var cs = this.canvas.style;\n            this.width = width;\n            this.height = height;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            width && (cs.width = width);\n            height && (cs.height = height);\n            cs.clip = \"rect(0 \" + cs.width + \" \" + cs.height + \" 0)\";\n            if (this._viewBox) {\n                R._engine.setViewBox.apply(this, this._viewBox);\n            }\n            return this;\n        };\n        R._engine.setViewBox = function(x, y, w, h, fit) {\n            eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n            var width = this.width,\n            height = this.height,\n            size = 1 / mmax(w / width, h / height),\n            H, W;\n            if (fit) {\n                H = height / h;\n                W = width / w;\n                if (w * H < width) {\n                    x -= (width - w * H) / 2 / H;\n                }\n                if (h * W < height) {\n                    y -= (height - h * W) / 2 / W;\n                }\n            }\n            this._viewBox = [x, y, w, h, !!fit];\n            this._viewBoxShift = {\n                dx: -x,\n                dy: -y,\n                scale: size\n            };\n            this.forEach(function(el) {\n                el.transform(\"...\");\n            });\n            return this;\n        };\n        var createNode;\n        R._engine.initWin = function(win) {\n            var doc = win.document;\n            doc.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n            try {\n                !doc.namespaces.rvml && doc.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n                createNode = R._createNode = function(tagName, attrs) {\n                    var el = doc.createElement('<rvml:' + tagName + ' class=\"rvml\">'),\n                    prop;\n                    for (prop in attrs) {\n                        el[prop] = Str(attrs[prop]);\n                    }\n                    return el;\n                };\n            } catch (e) {\n                createNode = R._createNode = function(tagName, attrs) {\n                    var el = doc.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">'),\n                    prop;\n                    for (prop in attrs) {\n                        el[prop] = Str(attrs[prop]);\n                    }\n                    return el;\n                };\n            }\n        };\n        R._engine.initWin(R._g.win);\n        R._engine.create = function() {\n            var con = R._getContainer.apply(0, arguments),\n            container = con.container,\n            height = con.height,\n            s,\n            width = con.width,\n            x = con.x,\n            y = con.y;\n            if (!container) {\n                throw new Error(\"VML container not found.\");\n            }\n            var res = new R._Paper,\n            c = res.canvas = R._g.doc.createElement(\"div\"),\n            cs = c.style;\n            x = x || 0;\n            y = y || 0;\n            width = width || 512;\n            height = height || 342;\n            res.width = width;\n            res.height = height;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n            res.coordorigin = \"0 0\";\n            c.id = \"raphael-paper-\" + res.id;\n            res.span = R._g.doc.createElement(\"span\");\n            res.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\";\n            c.appendChild(res.span);\n            cs.cssText = R.format(\"top:0;left:0;width:{0};height:{1};display:inline-block;cursor:default;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\", width, height);\n            if (container == 1) {\n                R._g.doc.body.appendChild(c);\n                cs.left = x + \"px\";\n                cs.top = y + \"px\";\n                cs.position = \"absolute\";\n            } else {\n                if (container.firstChild) {\n                    container.insertBefore(c, container.firstChild);\n                } else {\n                    container.appendChild(c);\n                }\n            }\n            res.renderfix = function() {\n            };\n            return res;\n        };\n        R.prototype.clear = function() {\n            var c;\n            eve(\"raphael.clear\", this);\n            while (c = this.bottom) {\n                c.remove();\n            }\n            this.canvas.innerHTML = E;\n            this.span = R._g.doc.createElement(\"span\");\n            this.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n            this.canvas.appendChild(this.span);\n            this.bottom = this.top = null;\n        };\n        R.prototype.remove = function() {\n            var i;\n            eve(\"raphael.remove\", this);\n            while (i = this.bottom) {\n                i.remove();\n            }\n            this.canvas.parentNode.removeChild(this.canvas);\n            for (i in this) {\n                this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n            }\n            return true;\n        };\n\n        R.prototype.setHTMLClassName = function (className) {\n            this._HTMLClassName = className;\n        };\n        // var setproto = R.st;\n        // for (var method in elproto)\n        //     if (elproto[has](method) && !setproto[has](method)) {\n        //         setproto[method] = (function(methodname) {\n        //             return function() {\n        //                 var arg = arguments;\n        //                 return this.forEach(function(el) {\n        //                     el[methodname].apply(el, arg);\n        //                 });\n        //             };\n        //         })(method);\n        //     }\n    }\n}\n","/**\n * Red Raphael JavaScript Library\n * ------------------------------\n * Extension for support of export feature of paper\n * @since 3.3\n * @private\n *\n * @module fusioncharts.redraphael.export\n * @requires fusioncharts.redraphael\n */\n\nimport { stubFN, pluckNumber, pluck } from '../../lib';\n// raphael toSvg methode\n// Wrapper function\nexport default function (R) {\n  let UNDEF,\n    availableAttrs = R._availableAttrs,\n    NONE = 'none',\n    BLANK = '',\n    SPACE = ' ',\n    UNDERSCORE = '_',\n    COLON = ':',\n    SCOLONSPACE = '; ',\n    EQUALQUOT = '=\"',\n    QUOT = '\"',\n    QUOTSPACE = QUOT + SPACE,\n    LT = '<',\n    GT = '>',\n    NODESTRPART5 = '</',\n    XLINK = ' xlink:href=\"',\n    IMGNODE = 'image',\n    TXTNODE = 'text',\n    GRADIENT = 'gradient',\n    RECT = 'rect',\n    ASPRATIO = ' preserveAspectRatio=\"none\"',\n    NODESTRPART2 = ' transform=\"matrix(',\n    NODESTRPART3 = ')\" style=\"',\n    VALIGNSTR = 'vertical-align',\n    TEXTANCHOR = 'text-anchor',\n    MIDDLE = 'middle',\n    TOP = 'top',\n    BOTTOM = 'bottom',\n    FONTSIZE = 'font-size',\n    FONT = 'font',\n    LINEHEIGHT = 'line-height',\n    FONTFAMILY = 'font-family',\n    FONTWEIGHT = 'font-weight',\n    CURSOR = 'cursor:',\n    TSPANSTR1 = '<tspan ',\n    TSPANSTR2 = 'dy=\"',\n    TSPANSTR3 = '\" x=\"',\n    TSPANSTR4 = 'dy=\"',\n    RX = 'rx',\n    RY = 'ry',\n    TSPANSTR6 = '</tspan>',\n    PXSPACE = 'px; ',\n    CLIPRECT = 'clip-rect',\n    CLIPSTR1 = '<clipPath id=\"',\n    CLIPSTR2 = '\"><rect x=\"',\n    CLIPSTR3 = '\" y=\"',\n    CLIPSTR4 = '\" width=\"',\n    CLIPSTR5 = '\" height=\"',\n    CLIPSTR6 = '\"/></clipPath>',\n    CLIPSTR7 = ' clip-path=\"url(#',\n    CLIPSTR8 = QUOT + NODESTRPART2,\n    URLCLOSE = '\\')\"',\n    BRACKETCLOSE = ')',\n    DTAG = ' d=\"',\n    FILLSTR1 = 'fill:',\n    FILLSTR2 = ' fill=\"',\n    FILLSTR3 = ' fill=\"url(\\'#',\n    FILLSTR4 = ' fill-opacity=\"',\n    STROKE1 = ' stroke=\"',\n    STROKE2 = ' stroke-opacity=\"',\n    STROKEOPAC = 'stroke-opacity',\n    LINEAR = 'linear',\n    RADIAL = 'radial',\n    RGRADIENTSTR1 = '<radialGradient fx = \"',\n    RGRADIENTSTR3 = '</radialGradient>',\n    RGRADIENTSTR2 = '\" fy = \"',\n    RGRADIENTSTR6 = '\" cy = \"',\n    RGRADIENTSTR5 = '\" cx = \"',\n    RGRADIENTSTR7 = '\" r = \"',\n    RGRADIENTSTR8 = '\" gradientUnits = \"',\n    ID = '\" id = \"',\n    RGRADIENTSTR4 = '\">',\n    LGRADIENTSTR6 = '</linearGradient>',\n    LGRADIENTSTR5 = '\" gradientTransform =\"matrix(',\n    LGRADIENTSTR1 = '<linearGradient x1 = \"',\n    LGRADIENTSTR2 = '\" y1 = \"',\n    LGRADIENTSTR3 = '\" x2 = \"',\n    LGRADIENTSTR4 = '\" y2 = \"',\n    STOPSTR1 = '<stop',\n    STOPSTR2 = ' offset=\"',\n    STOPSTR3 = '\" stop-color=\"',\n    STOPSTR4 = '\" stop-opacity=\"',\n    STOPSTR5 = '\" />',\n    COLORWHITE = '#fff',\n    PERCENT100 = '100%',\n    PERCENT0 = '0%',\n\n    // frequently used reg-exp\n    matrixSanitizerReg = /^matrix\\(|\\)$/g,\n    commaSanitizerReg = /\\,/g,\n    textNewLineReg = /\\n|<br\\s*?\\/?>/ig,\n    retriveNumReg = /[^\\d\\.]/ig,\n    idSanitizerReg = /[\\%\\(\\)\\s,\\xb0#]/g,\n    grouptagtestReg = /group/ig,\n    ampregex = /&/g,\n    quot1regex = /\"/g,\n    quot2regex = /'/g,\n    ltregex = /</g,\n    gtregex = />/g,\n    ampSTR = '&amp;',\n    quot1STR = '&quot;',\n    quot2STR = '&#39;',\n    ltSTR = '&lt;',\n    gtSTR = '&gt;',\n    IdCounter = 0,\n    gradientUnitNames = {\n      userSpaceOnUse: 'userSpaceOnUse',\n      objectBoundingBox: 'objectBoundingBox'\n    },\n    math = Math,\n    toFloat = parseFloat,\n    mmax = math.max,\n    abs = math.abs,\n    pow = math.pow,\n    Str = String,\n    separator = /[, ]+/,\n    attributeParser = {\n      blur: function () {\n        /** @todo stop use of blur as attribute */\n      },\n      transform: function () {\n        // skip this attribute\n      },\n      src: function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj.src;\n        conf.attrSTR += XLINK + value + QUOT;\n      },\n      path: function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj.path;\n\n        value = R._pathToAbsolute(value || BLANK);\n        conf.attrSTR += DTAG + ((value.toString && value.toString()) || BLANK)\n          .replace(commaSanitizerReg, SPACE) + QUOT;\n      },\n      gradient: function (node, conf, defs) {\n        var attrsObj = node.attrs,\n          value = attrsObj.gradient,\n          type = LINEAR,\n          id = value,\n          angle,\n          vector,\n          max,\n          dots,\n          fx = 0.5,\n          fy = 0.5,\n          gStr = BLANK,\n          gCloseStr = BLANK,\n          stopStr = BLANK,\n          i,\n          ln,\n          cx,\n          cy,\n          r,\n          units;\n\n        id = id.replace(idSanitizerReg, UNDERSCORE);\n        if (!defs[id]) {\n          // eslint-disable-next-line no-unused-vars\n          value = Str(value).replace(R._radial_gradient, function (all, _opts) { // jshint ignore: line\n            var _fx,\n              _fy,\n              dir,\n              _r,\n              _cx,\n              _cy,\n              sqx,\n              opts = _opts,\n              shifted;\n\n            opts = (opts && opts.split(',')) || [];\n            type = RADIAL;\n\n            _fx = opts[0];\n            _fy = opts[1];\n            _r = opts[2];\n            _cx = opts[3];\n            _cy = opts[4];\n            units = opts[5];\n            shifted = (_fx && _fy);\n\n            if (_r) {\n              r = /\\%/.test(_r) ? _r : toFloat(_r);\n            }\n\n            if (units === gradientUnitNames.userSpaceOnUse) {\n              if (shifted) {\n                fx = _fx;\n                fy = _fy;\n              }\n              if (_cx && _cy) {\n                cx = _cx;\n                cy = _cy;\n                if (!shifted) {\n                  fx = cx;\n                  fy = cy;\n                }\n              }\n              return BLANK;\n            }\n\n            if (shifted) {\n              fx = toFloat(_fx);\n              fy = toFloat(_fy);\n              dir = ((fy > 0.5) * 2 - 1);\n              (sqx = pow(fx - 0.5, 2)) + pow(fy - 0.5, 2) > 0.25 &&\n                            (sqx < 0.25) && (fy = math.sqrt(0.25 - sqx) * dir + 0.5) &&\n                            fy !== 0.5 &&\n                            (fy = fy.toFixed(5) - 1e-5 * dir);\n            }\n            if (_cx && _cy) {\n              cx = toFloat(_cx);\n              cy = toFloat(_cy);\n              dir = ((cy > 0.5) * 2 - 1);\n\n              (sqx = pow(cx - 0.5, 2)) + pow(cy - 0.5, 2) > 0.25 &&\n                            (sqx < 0.25) && (cy = math.sqrt(0.25 - sqx) * dir + 0.5) &&\n                            cy !== 0.5 &&\n                            (cy = cy.toFixed(5) - 1e-5 * dir);\n\n              if (!shifted) {\n                fx = cx;\n                fy = cy;\n              }\n            }\n            return BLANK;\n          });\n          value = value.split(/\\s*\\-\\s*/);\n          if (type === LINEAR) {\n            angle = value.shift();\n            angle = -toFloat(angle);\n            if (isNaN(angle)) {\n              return null;\n            }\n            vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))];\n            max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n            vector[2] *= max;\n            vector[3] *= max;\n            if (vector[2] < 0) {\n              vector[0] = -vector[2];\n              vector[2] = 0;\n            }\n            if (vector[3] < 0) {\n              vector[1] = -vector[3];\n              vector[3] = 0;\n            }\n          }\n          dots = R._parseDots(value);\n          if (!dots) {\n            return null;\n          }\n\n          if (type === RADIAL) {\n            gStr = RGRADIENTSTR1 + fx +\n                                RGRADIENTSTR2 + fy +\n                                RGRADIENTSTR6 + cy +\n                                RGRADIENTSTR5 + cx +\n                                RGRADIENTSTR7 + r +\n                                RGRADIENTSTR8 + units +\n                                ID + id + RGRADIENTSTR4;\n            gCloseStr = RGRADIENTSTR3;\n          } else {\n            gStr = LGRADIENTSTR1 + vector[0] + LGRADIENTSTR2 +\n                            vector[1] + LGRADIENTSTR3 + vector[2] + LGRADIENTSTR4 + vector[3] +\n                            LGRADIENTSTR5 + node.matrix.invert() + BRACKETCLOSE + ID +\n                            id + RGRADIENTSTR4;\n\n            gCloseStr = LGRADIENTSTR6;\n          }\n\n          for (i = 0, ln = dots.length; i < ln; i++) {\n            stopStr += STOPSTR1 +\n                                STOPSTR2 + (dots[i].offset ? dots[i].offset : (i ? PERCENT100 : PERCENT0)) +\n                                STOPSTR3 + (dots[i].color || COLORWHITE) +\n                                STOPSTR4 + (dots[i].opacity === UNDEF ? 1 : dots[i].opacity) + STOPSTR5;\n          }\n          defs[id] = true;\n          defs.str += gStr + stopStr + gCloseStr;\n        }\n        conf.attrSTR += FILLSTR3 + id + URLCLOSE;\n      },\n      fill: function (node, conf) {\n        var attrsObj = conf.attrs,\n          value = attrsObj.fill,\n          color,\n          opacity;\n        if (!node.attrs.gradient) {\n          color = R.color(value);\n          opacity = color.opacity;\n          if (node.type === TXTNODE) {\n            conf.styleSTR += FILLSTR1 + color + SCOLONSPACE + STROKEOPAC + COLON + 0 + SCOLONSPACE;\n          } else {\n            conf.attrSTR += FILLSTR2 + color + QUOT;\n            if (!attrsObj['fill-opacity'] && (opacity || opacity === 0)) {\n              conf.attrSTR += FILLSTR4 + opacity + QUOT;\n            }\n          }\n        }\n      },\n      stroke: function (node, conf) {\n        var attrsObj = conf.attrs,\n          value = attrsObj.stroke,\n          color,\n          opacity;\n        color = R.color(value);\n        opacity = color.opacity;\n        if (node.type !== TXTNODE) {\n          conf.attrSTR += STROKE1 + color + QUOT;\n          if (!attrsObj[STROKEOPAC] && (opacity || opacity === 0)) {\n            conf.attrSTR += STROKE2 + opacity + QUOT;\n          }\n        }\n      },\n      'clip-rect': function (node, conf, defs) {\n        var attrsObj = conf.attrs,\n          value = Str(attrsObj[CLIPRECT]),\n          rect = value.split(separator),\n          id = value.replace(idSanitizerReg, UNDERSCORE) +\n                        UNDERSCORE + UNDERSCORE + (IdCounter++);\n\n        if (rect.length === 4) {\n          if (!defs[id]) {\n            defs[id] = true;\n            defs.str += CLIPSTR1 + id + CLIPSTR2 +\n                                rect[0] + CLIPSTR3 + rect[1] + CLIPSTR4 +\n                                rect[2] + CLIPSTR5 + rect[3] + CLIPSTR8 +\n                                node.matrix.invert().toMatrixString().replace(matrixSanitizerReg, BLANK) +\n                                BRACKETCLOSE + CLIPSTR6;\n          }\n          conf.attrSTR += CLIPSTR7 + id + BRACKETCLOSE + QUOT;\n        }\n      },\n      cursor: function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj.cursor;\n        if (value) {\n          conf.styleSTR += CURSOR + value + SCOLONSPACE;\n        }\n      },\n      font: function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj.font;\n        conf.styleSTR += FONT + COLON + value.replace(/\\\"/ig, SPACE) + SCOLONSPACE;\n      },\n      'font-size': function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = pluck(attrsObj[FONTSIZE], '10');\n        if (value && value.replace) {\n          value = value.replace(retriveNumReg, BLANK);\n        }\n        conf.styleSTR += FONTSIZE + COLON + value + PXSPACE;\n      },\n      'font-weight': function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj[FONTWEIGHT];\n        conf.styleSTR += FONTWEIGHT + COLON + value + SCOLONSPACE;\n      },\n      'font-family': function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj[FONTFAMILY];\n        conf.styleSTR += FONTFAMILY + COLON + value + SCOLONSPACE;\n      },\n      'line-height': stubFN,\n      'clip-path': stubFN,\n      'visibility': stubFN,\n      'vertical-align': stubFN,\n      'text-anchor': function (node, conf) {\n        var attrsObj = conf.attrs,\n          value = attrsObj[TEXTANCHOR] || MIDDLE;\n        if (node.type === TXTNODE) {\n          conf.attrSTR += SPACE + TEXTANCHOR + EQUALQUOT + value + QUOT;\n        }\n      },\n      title: stubFN,\n      text: function () {\n        var conf = arguments[1],\n          attrsObj = conf.attrs,\n          value = attrsObj.text,\n          fontSize = pluck(attrsObj[FONTSIZE], attrsObj[FONT], '10'),\n          lineHeight = pluck(attrsObj[LINEHEIGHT]),\n          baseHeight,\n          x,\n          valign,\n          texts,\n          i,\n          ii,\n          baseAdjust,\n          text;\n\n        if (fontSize && fontSize.replace) {\n          fontSize = fontSize.replace(retriveNumReg, BLANK);\n        }\n        fontSize = pluckNumber(fontSize);\n        if (lineHeight && lineHeight.replace) {\n          lineHeight = lineHeight.replace(retriveNumReg, BLANK);\n        }\n        lineHeight = pluckNumber(lineHeight, fontSize && fontSize * 1.2);\n        baseHeight = fontSize ? fontSize * 0.85 : lineHeight * 0.75;\n        x = attrsObj.x;\n        valign = pluck(attrsObj[VALIGNSTR], MIDDLE).toLowerCase();\n        texts = Str(value).split(textNewLineReg);\n        ii = texts.length;\n        i = 0;\n        baseAdjust = (valign === TOP ? baseHeight : (valign === BOTTOM\n          ? (baseHeight - (lineHeight * ii)) : (baseHeight - (lineHeight * ii * 0.5))));\n\n        for (; i < ii; i++) {\n          conf.textSTR += TSPANSTR1;\n          text = (texts[i] || BLANK).replace(ampregex, ampSTR)\n            .replace(quot1regex, quot1STR)\n            .replace(quot2regex, quot2STR)\n            .replace(ltregex, ltSTR)\n            .replace(gtregex, gtSTR);\n          if (i) {\n            conf.textSTR += TSPANSTR2 + lineHeight + TSPANSTR3 + x + QUOTSPACE;\n          } else {\n            conf.textSTR += TSPANSTR4 + baseAdjust + QUOT;\n          }\n          conf.textSTR += GT + text + TSPANSTR6;\n        }\n      }\n    },\n    /**\n     * This the methode used to generate SVG string of a Raphael element.\n     * This methode is used in non-SVG browser only.\n     *\n     * @param {RaphaelElement} node is to be converted into xml string\n     * @param {Object} defs is the store of all defs information\n     *\n     */\n\n    parseNode = function (node, defs) {\n      var xmlSTR = BLANK,\n        conf = {\n          attrSTR: BLANK,\n          styleSTR: BLANK,\n          textSTR: BLANK,\n          attrs: node.attr()\n        },\n        isShadow = node.isShadow,\n        childXMLSTR = BLANK,\n        nextXMLSTR = BLANK,\n        attrName,\n        styleName,\n        nodeType,\n        attrs = conf.attrs;\n\n      // parse visible nodes only\n      if (node.node.style.display !== NONE && !isShadow) {\n        // parse all atributes\n        for (attrName in attrs) {\n          if (attrName !== GRADIENT && (availableAttrs[attrName] !== UNDEF ||\n                        attributeParser[attrName]) && attrs[attrName] !== UNDEF) {\n            // /if custom parser exist then use it\n            if (attributeParser[attrName]) { // if need persing\n              attributeParser[attrName](node, conf, defs);\n            } else { // else add the attribute directly\n              conf.attrSTR += SPACE + attrName + EQUALQUOT + attrs[attrName] + QUOT;\n            }\n          }\n        }\n        // add the gradient\n        if (node.attrs.gradient) {\n          attributeParser.gradient(node, conf, defs);\n        }\n        if (node.type === RECT && attrs.r) {\n          conf.attrSTR += SPACE + RX + EQUALQUOT + attrs.r + QUOT +\n                            SPACE + RY + EQUALQUOT + attrs.r + QUOT;\n        }\n\n        // Parse all style atributes that are not in attrs\n        for (styleName in node.styles) {\n          conf.styleSTR += styleName + COLON + node.styles[styleName] + SCOLONSPACE;\n        }\n\n        // node type speciffic changes\n        if (node.type === IMGNODE) {\n          conf.attrSTR += ASPRATIO;\n        }\n\n        // For text node apply default text anchor\n        if (node.type === TXTNODE && !attrs[TEXTANCHOR]) {\n          attributeParser[TEXTANCHOR](node, conf);\n        }\n\n        // if node has a child element then parse the child element\n        if (node.bottom) {\n          childXMLSTR = parseNode(node.bottom, defs);\n        }\n        // parse following sibling also\n        if (node.next) {\n          nextXMLSTR = parseNode(node.next, defs);\n        }\n        nodeType = node.type;\n        if (nodeType.match(grouptagtestReg)) {\n          nodeType = 'g';\n        }\n        // generate SVG string\n        xmlSTR += LT + nodeType + NODESTRPART2 +\n                    node.matrix.toMatrixString().replace(matrixSanitizerReg, BLANK) +\n                    NODESTRPART3 + conf.styleSTR + QUOT + conf.attrSTR +\n                    GT + conf.textSTR + childXMLSTR + NODESTRPART5 +\n                    nodeType + GT + nextXMLSTR;\n      } else {\n        // parse following sibling also\n        if (node.next) {\n          xmlSTR += parseNode(node.next, defs);\n        }\n      }\n      return xmlSTR;\n    };\n\n  /**\n   * This the methode return the SVG string of a Raphael paper.\n   *\n   */\n  if (R.vml) {\n    R.fn.toSVG = function (keepImages) {\n      var paper = this,\n        svg = BLANK,\n        defs = {str: BLANK},\n        childXMLSTR = BLANK;\n\n      // for VML browser parse node element and create SVG string\n      svg = '<svg style=\"overflow: hidden; position: relative;\" xmlns=\"http://www.w3.org/2000/svg\"' +\n                    ' xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"' +\n                    paper.width + '\" version=\"1.1\" height=\"' + paper.height + '\">';\n\n      if (paper.bottom) {\n        // parse all node manualy and create XML string\n        childXMLSTR = parseNode(paper.bottom, defs);\n      }\n      svg += '<defs>' + defs.str + '</defs>' + childXMLSTR + '</svg>';\n      // remove all image tags\n      if (!keepImages) {\n        svg = svg.replace(/<image[^\\>]*\\>[^\\>]*\\>/gi, function (str) {\n          // Skipping data URI images\n          if (str.match(/href=\\\"data\\:image/i)) {\n            return str;\n          }\n          return BLANK;\n        });\n      }\n      return svg;\n    };\n  }\n}\n"],"sourceRoot":""}